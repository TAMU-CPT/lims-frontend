<style>
.phage-card .md-title-prefix {
	color: rgba(0,0,0,0.87)
}
.phage-card .md-title {
	color: black;
	font-weight: 700;
}
</style>
<div layout="row" layout-align="center">
	<div flex=40>
		<md-card>
			<md-toolbar layout="row" class="md-hue-1">
				<div class="md-toolbar-tools phage-card" flex>
					<span class="md-title-prefix">Phage&nbsp;</span>
					<span class="md-title">{{ data.primary_name }}</span>
					<span flex></span>
					<!-- TODO: Show if user -->
					<md-button class="md-icon-button" aria-label="Edit User Information" ng-click="edit_data()" ng-if="disabled">
						<ng-md-icon icon="edit"></ng-md-icon>
					</md-button>
					<md-button class="md-icon-button" aria-label="Save Changes" ng-click="edit_data_save()" ng-if="!disabled">
						<ng-md-icon icon="save"></ng-md-icon>
					</md-button>
					<md-button class="md-icon-button" aria-label="Cancel Changes" ng-click="edit_data_cancel()" ng-if="!disabled">
						<ng-md-icon icon="cancel"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card-content>
				<div layout="column">
					<md-input-container flex>
						<label>Name</label>
						<input ng-disabled="disabled" ng-model="data.primary_name">
					</md-input-container>

					<md-input-container flex>
						<label>Historical Names</label>
						<input ng-disabled="disabled" ng-model="data.historical_names">
					</md-input-container>
				</div>
			</md-card-content>
		</md-card>

		<md-card>
			<md-toolbar layout="row" class="md-hue-1">
				<div class="md-toolbar-tools media--card" flex>
					<span class="md-title">Metadata</span>
					<span flex></span>
					<!-- TODO: Show if user -->
					<md-button class="md-icon-button" aria-label="Edit Metadata" ng-click="upload_media()">
						<ng-md-icon icon="edit"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card-content>
				<h3>Hosts</h3>
				<ul>
					<li ng-repeat="host in data.host_lims" ng-bind-html='host | host_formatter'></li>
				</ul>
				asdf
			</md-card-content>
		</md-card>

		<md-card>
			<md-toolbar layout="row" class="md-hue-1">
				<div class="md-toolbar-tools media--card" flex>
					<span class="md-title">Media</span>
					<span flex></span>
					<!-- TODO: Show if user -->
					<md-button class="md-icon-button" aria-label="Upload a Picture" ng-click="upload_media()">
						<ng-md-icon icon="add"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card-title-media>
				<div class="md-media-md card-media">
					<img src="http://placekitten.com/g/500/500" />
				</div>
			</md-card-title-media>
		</md-card>
	</div>
	<div flex=60 layout="column">

		<div layout="row">
			<span flex></span>
			<ng-md-icon icon="arrow_upwards"></ng-md-icon>
			<span flex></span>
		</div>

		<md-card class="lysate-card">
			<md-toolbar layout="row" class="md-hue-2">
				<div class="md-toolbar-tools" flex>
					<span class="md-title">Lysate</span>
					<span flex></span>
					<md-button ng-href="#/tubes/{{ data.lysate.tube.id }}" aria-label="close" class="md-icon-button">
						<ng-md-icon icon="inbox"></ng-md-icon>
						<md-tooltip>
							Tube {{ data.lysate.tube.name }}
						</md-tooltip>
					</md-button>
				</div>
			</md-toolbar>
			<md-card-content>
				<md-table-container>
					<table md-table md-progress="promise">
						<thead md-head>
							<tr md-row>
								<th md-column>Property</th>
								<th md-column>Value</th>
							</tr>
						</thead>
						<tbody md-body>
							<tr md-row>
								<td md-cell>Old ID</td>
								<td md-cell>{{ data.lysate.oldid }}</td>
							</tr>
							<tr md-row>
								<td md-cell>Isolation Date</td>
								<td md-cell>{{ data.lysate.isolation }}</td>
							</tr>
						</tbody>
					</table>
				</md-table-container>
			</md-card-content>
		</md-card>

		<div layout="row">
			<span flex></span>
			<ng-md-icon icon="arrow_upwards"></ng-md-icon>
			<span flex></span>
		</div>

		<md-card class="env-sample-card">
			<md-toolbar layout="row" class="md-hue-2">
				<div class="md-toolbar-tools" flex>
					<span class="md-title">Environmental Sample</span>
				</div>
			</md-toolbar>
			<md-card-content>
				<!-- TODO MAP -->
				<h3>Samples</h3>
				<md-table-container>
					<table md-table md-progress="promise">
						<thead md-head>
							<tr md-row>
								<th md-column>Type</th>
								<th md-column>Description</th>
								<th md-column>Collection Location</th>
								<th md-column>Tube</th>
							</tr>
						</thead>
						<tbody md-body>
							<tr md-row ng-repeat="env_sample in data.env_sample_collection.env_sample">
								<td md-cell>{{ env_sample.sample_type.name }}</td>
								<td md-cell>{{ env_sample.description }}</td>
								<td md-cell>{{ env_sample.location }}</td>
								<td md-cell>
									<md-button ng-href="#/tubes/{{ env_sample.tube.id }}" aria-label="close" class="md-icon-button">
										<ng-md-icon icon="inbox"></ng-md-icon>
										<md-tooltip>
											Tube {{ env_sample.tube.name }}
										</md-tooltip>
									</md-button>
								</td>
							</tr>
						</tbody>
					</table>
				</md-table-container>
			</md-card-content>
		</md-card>





		<pre>
{{ data | json }}
		</pre>


	</div>
</div>



<div style="visibility: hidden">
	<div class="md-dialog-container" id="create">
		<md-dialog>
			<md-toolbar>
				<div class="md-toolbar-tools">
					<span class="md-headline">Share</span>
					<span flex></span>
					<md-button ng-click="popup_cancel()" aria-label="close" class="md-icon-button">
						<ng-md-icon icon="close"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card style="margin:0">
				<md-card-content layout="column">
					<form name="shareForm">
<pre>
{{ share | json }}
</pre>

<!--md-autocomplete-snap="" md-transform-chip="ctrl.transformChip($chip)" -->

						<md-chips ng-model="share.shareWith" md-require-match="true">
							<md-autocomplete
									md-selected-item="share.selectedItem"
									md-search-text="share.searchText"
									md-items="item in share.querySearchGroup(share.searchText)"
									md-item-text="item.name" placeholder="Search for a user or group">
								<span md-highlight-text="share.searchText">{{item.name}}</span>
							</md-autocomplete>
							<md-chip-template>
								<span>
									<strong>{{$chip.name}}</strong>
								</span>
							</md-chip-template>
						</md-chips>



						<!--<md-input-container class="md-block">-->
							<!--<label>Name</label>-->
							<!--<input md-maxlength="32" required name="name" ng-model="createData.name">-->
							<!--<div ng-messages="createBioProjectForm.description.$error">-->
								<!--<div ng-message="required">This is required.</div>-->
								<!--<div ng-message="md-maxlength">The description must be less than 30 characters long.</div>-->
							<!--</div>-->
						<!--</md-input-container>-->

						<!--<md-input-container class="md-block">-->
							<!--<label>Description</label>-->
							<!--<textarea name="description" ng-model="createData.description"></textarea>-->
						<!--</md-input-container>-->

						<div>
							<md-button class="md-primary"           ng-click="popup_cancel()">
								Cancel
							</md-button>
							<md-button class="md-primary md-raised" ng-click="popup_share_action()">
								Share
							</md-button>
						</div>
					</form>
				</md-card-content>
			</md-card>
		</md-dialog>
	</div>
</div>
