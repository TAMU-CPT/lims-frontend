<style type="text/css">
.s48 {
	fill: #444444;
	margin: 0px;
}
md-chips.md-default-theme .md-chips, md-chips .md-chips {
	box-shadow: none !important;
}
</style>
<div layout="row" layout-align="center">
	<div flex=40>
		<md-card>
			<md-toolbar layout="row" class="md-hue-2">
				<div class="md-toolbar-tools" flex>
					<span class="md-title">{{ data.name }}</span>
					<span flex></span>
					<!-- TODO: Show if user -->
					<md-button class="md-icon-button" aria-label="Edit User Information" ng-click="edit_data()" ng-if="disabled">
						<ng-md-icon icon="edit"></ng-md-icon>
					</md-button>
					<md-button class="md-icon-button" aria-label="Delete Phage" ng-click="edit_data_delete()" ng-if="!disabled">
						<ng-md-icon icon="delete"></ng-md-icon>
					</md-button>
					<md-button class="md-icon-button" aria-label="Save Changes" ng-click="edit_data_save()" ng-if="!disabled">
						<ng-md-icon icon="save"></ng-md-icon>
					</md-button>
					<md-button class="md-icon-button" aria-label="Cancel Changes" ng-click="edit_data_cancel()" ng-if="!disabled">
						<ng-md-icon icon="cancel"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card-header>
				<md-card-header-text>
					<span flex class="md-subhead">Created {{data.date}}</span>
				</md-card-header-text>
			</md-card-header>
			<md-card-content>
				<div layout="column">
					<md-input-container flex>
						<label>name</label>
						<input ng-disabled="disabled" ng-model="data.name">
					</md-input-container>
					<md-input-container flex>
						<label>description</label>
						<input ng-disabled="disabled" ng-model="data.description">
					</md-input-container>
				</div>
			</md-card-content>
		</md-card>
		<md-card>
			<md-toolbar layout="row" class="md-hue-1">
				<div class="md-toolbar-tools" flex>
					<span class="md-title">Access &amp; Sharing</span>
					<span flex></span>
					<!-- TODO: Show if user -->
					<md-button class="md-icon-button" aria-label="Share" ng-click="popup_share()">
						<ng-md-icon icon="share"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card-content>
				<b>Groups</b>
				<md-chips ng-model="data.editingrolegroup_set" readonly="true">
					<md-chip-template>
						<ng-md-icon icon="{{ $chip.role | role_icon }}"></ng-md-icon>
						{{ $chip.group.name }}
					</md-chip-template>
				</md-chips>

				<b>Users</b>
				<md-chips ng-model="data.editingroleuser_set" readonly="true">
					<md-chip-template ng-click="go_user($chip.user.id)">
						<ng-md-icon icon="{{ $chip.role | role_icon }}"></ng-md-icon>
						{{ $chip.user.name }}
					</md-chip-template>
				</md-chips>
			</md-card-content>
		</md-card>
	</div>
	<div flex=60>
		<md-card>
			<md-toolbar layout="row" class="md-hue-2">
				<div class="md-toolbar-tools" flex>
					<span class="md-title">Sample Collection</span>
					<span flex></span>
					<!-- TODO: Show if user -->
					<md-button class="md-icon-button" aria-label="Edit User Information" ng-click="edit_samples()" ng-if="disabled_samples">
						<ng-md-icon icon="edit"></ng-md-icon>
					</md-button>
					<md-button class="md-icon-button" aria-label="Save Changes" ng-click="edit_samples_save()" ng-if="!disabled_samples">
						<ng-md-icon icon="save"></ng-md-icon>
					</md-button>
					<md-button class="md-icon-button" aria-label="Cancel Changes" ng-click="edit_samples_cancel()" ng-if="!disabled_samples">
						<ng-md-icon icon="cancel"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card-content>
				<md-chips
					ng-model="samples"
					readonly="disabled_samples"
					md-transform-chip="ctrl.transformChip($chip)"
					md-require-match="false">
					<md-autocomplete
						md-selected-item="ctrl.selectedItem"
						md-search-text="ctrl.searchText"
						md-items="item in ctrl.querySearch(ctrl.searchText)"
						md-item-text="item.primary_name"
						placeholder="Search for a phage">
						<span md-highlight-text="ctrl.searchText">{{item.primary_name}} (P:{{item.id}})</span>
					</md-autocomplete>
					<md-chip-template>
						<span>
							<strong>{{$chip.primary_name}}</strong>
							<em>({{$chip.id}})</em>
						</span>
					</md-chip-template>
				</md-chips>



				<!--
				<md-list flex ng-if="!disabled_samples">
					<md-list-item ng-repeat="sample in data.sample" ng-href="#/phages/{{sample.id}}">
						<md-icon md-svg-src="phage.svg" aria-label="Phage Sample" class="s48"></md-icon>
						{{ sample.primary_name }}
					</md-list-item>
				</md-list>
				-->
			</md-card-content>
		</md-card>
	</div>
</div>






<div style="visibility: hidden">
	<div class="md-dialog-container" id="add_sample">
		<md-dialog>
			<md-toolbar>
				<div class="md-toolbar-tools">
					<span class="md-headline">Add a Phage</span>
					<span flex></span>
					<md-button ng-click="popup_cancel()" aria-label="Cancel" class="md-icon-button">
						<ng-md-icon icon="close"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card style="margin:0">
				<md-card-content layout="column">
					<form ng-submit="$event.preventDefault()">
						<!--
						<md-autocomplete class="md-whiteframe-1dp"
								ng-disabled="false"
								md-no-cache="false"
								md-selected-item="ctrl.selectedItem"
								md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
								md-search-text="ctrl.searchText"
								md-selected-item-change="ctrl.selectedItemChange(item)"
								md-items="item in ctrl.querySearch(ctrl.searchText)"
								md-item-text="item.primary_name"
								md-min-length="0"
								placeholder="Enter a Phage's name">
							<md-item-template>
								<span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">
									{{item.primary_name}}
								</span>
							</md-item-template>
							<md-not-found>
								<a ng-click="ctrl.newState(ctrl.searchText)">
								No phages matching "{{ctrl.searchText}}" were found. Click to create a new one
								</a>
							</md-not-found>
						</md-autocomplete>
						-->


						<div>
							<md-button class="" ng-click="popup_cancel()">
								Cancel
							</md-button>
							<md-button class="md-primary md-raised" ng-click="popup_add_action()">
								Add Phage
							</md-button>
						</div>
					</form>
				</md-card-content>
			</md-card>
		</md-dialog>
	</div>
</div>








<div style="visibility: hidden">
	<div class="md-dialog-container" id="create">
		<md-dialog>
			<md-toolbar>
				<div class="md-toolbar-tools">
					<span class="md-headline">Share</span>
					<span flex></span>
					<md-button ng-click="popup_cancel()" aria-label="close" class="md-icon-button">
						<ng-md-icon icon="close"></ng-md-icon>
					</md-button>
				</div>
			</md-toolbar>
			<md-card style="margin:0">
				<md-card-content layout="column">
					<form name="shareForm">
<pre>
{{ share | json }}
</pre>

<!--md-autocomplete-snap="" md-transform-chip="ctrl.transformChip($chip)" -->

						<md-chips ng-model="share.shareWith" md-require-match="true">
							<md-autocomplete
									md-selected-item="share.selectedItem"
									md-search-text="share.searchText"
									md-items="item in share.querySearchGroup(share.searchText)"
									md-item-text="item.name" placeholder="Search for a user or group">
								<span md-highlight-text="share.searchText">{{item.name}}</span>
							</md-autocomplete>
							<md-chip-template>
								<span>
									<strong>{{$chip.name}}</strong>
								</span>
							</md-chip-template>
						</md-chips>



						<!--<md-input-container class="md-block">-->
							<!--<label>Name</label>-->
							<!--<input md-maxlength="32" required name="name" ng-model="createData.name">-->
							<!--<div ng-messages="createBioProjectForm.description.$error">-->
								<!--<div ng-message="required">This is required.</div>-->
								<!--<div ng-message="md-maxlength">The description must be less than 30 characters long.</div>-->
							<!--</div>-->
						<!--</md-input-container>-->

						<!--<md-input-container class="md-block">-->
							<!--<label>Description</label>-->
							<!--<textarea name="description" ng-model="createData.description"></textarea>-->
						<!--</md-input-container>-->

						<div>
							<md-button class="md-primary"           ng-click="popup_cancel()">
								Cancel
							</md-button>
							<md-button class="md-primary md-raised" ng-click="popup_share_action()">
								Share
							</md-button>
						</div>
					</form>
				</md-card-content>
			</md-card>
		</md-dialog>
	</div>
</div>
